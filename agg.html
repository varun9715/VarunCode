<!DOCTYPE html>
<html>
<head>
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
</head>


<form name="aggregator" id="aggregator">
Full Name :<input type="text" name="laFullName" title="Full Name">
<br>
Gender :
    <select name="laGender" title="Gender">
        <option value="">Select</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Transgender">Transgender</option>
    </select>
<br>
DOB : <input type="text" name="laDob" placeholder="Format yyyy-MM-dd" title="DOB">
<br>
Do you consume tobacco? :
    <select name="laTobacco" title="Tobacco">
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
    </select>
<br>
Occupation Type :
    <select name="laOccupationType" title="OccupationType">
        <option value="">Select</option>
        <option value="salaried">Salaried</option>
        <option value="businessman">Businessman</option>
        <option value="agriculture">Business(Agriculture)</option>
    </select>
<br>
Education Level:
    <select name="laEducationLevel" title="EducationLevel">
        <option value="">Select</option>
        <option value="6">Graduate</option>
        <option value="7">Postgraduate & above</option>
        <option value="5">Diploma</option>
        <option value="1">Below std X</option>
        <option value="2">Std X pass</option>
        <option value="4">Std XII Pass</option>
        <option value="3">Std XII Fail</option>
        <option value="0">Illiterate</option>
    </select>
<br>
Income Range:
    <select name="laIncomeRange" title="IncomeRange">
        <option value="">Select</option>
        <option value="Lakhs">Lakhs</option>
        <option value="Crore">Crore</option>
    </select>
<br>
Annual Income:<input type="text" name="laAnnualIncomeField" title="AnnualIncomeField">
<br>
Country Code:
    <select name="laCountryCode" title="CountryCode">
        <option value="">Select</option>
        <option value="+91">+91 IN</option>
        <option  value="+1">+1 CA</option>
        <option value="+421">+421 SK</option>
        <option value="+386">+386 SI</option>
        <option value="+82">+82 KR</option>
        <option value="+34">+34 ES</option>
        <option value="+46">+46 SE</option>
        <option value="+41">+41 CH</option>
        <option value="+886">+886 TW</option>
        <option value="+971">+971 AE</option>
        <option value="+44">+44 GB</option>
        <option value="+1">+1 US</option>
        <option value="+379">+379 VT</option>
    </select>
<br>
Mobile Number:<input type="text" name="laMobile" title="MobileNumber">
<br>
Email:<input type="text" name="laEmail" title="Email">
<br>
    Checkbox:
<input type="text" name="laContactLeadCheckbox" title="ContactLeadCheckbox">
<br>
<button type="submit" value="Submit" id="leadButton">Submit</button>

</form>
<script> 
$("#leadButton").click(function(e) {
var formData = $("#aggregator").serializeArray();
var leadData = getFormData(formData);
var	aggregatorId = '12345';
var paymentCompleted = 'false';
	e.preventDefault();
    $.ajax({
        type: "POST",
		crossDomain:true,
        headers: {
				"Authorization": "Basic " + btoa("admin:admin")
			},
        //url: "http://choice-qa-publish.qa9.tothenew.net/bin/content/aggregatordata",
        url: "http://localhost:8080/bin/content/aggregatordata",
        data: ({"leadData":JSON.stringify(leadData),"aggregatorId":aggregatorId,"paymentCompleted":paymentCompleted}),
        success: function(response) {
            window.location=response;
        },
        error: function() {
            console.log('error');
        }
    });

//utility function
function getFormData(data) {
   var unindexed_array = data;
   var indexed_array = {};

   $.map(unindexed_array, function(n, i) {
    indexed_array[n['name']] = n['value'];
   });

   return indexed_array;
}
});


</script>

</html>